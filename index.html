<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="FietsQuiz - Leer de Nederlandse verkeersregels op een leuke manier! Voor kinderen van 9 jaar.">
    <meta name="keywords" content="fietsen, verkeersregels, verkeerseducatie, kinderen, quiz, Nederland">
    <meta name="author" content="FietsQuiz">

    <!-- Open Graph meta tags -->
    <meta property="og:title" content="FietsQuiz - Leer de Verkeersregels!">
    <meta property="og:description" content="Leer de Nederlandse verkeersregels op een leuke manier! Voor kinderen van 9 jaar.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://verandert-gewoon.github.io/fietsquiz/">
    <meta property="og:image" content="https://verandert-gewoon.github.io/fietsquiz/images/og-image.png">

    <!-- Favicon using emoji -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üö≤</text></svg>">

    <title>FietsQuiz - Leer de Verkeersregels!</title>

    <!-- Tailwind CSS Play CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Custom Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'sans-serif']
                    },
                    animation: {
                        'bounce-slow': 'bounce 2s infinite',
                        'pulse-slow': 'pulse 3s infinite',
                        'wiggle': 'wiggle 1s ease-in-out infinite',
                    },
                    keyframes: {
                        wiggle: {
                            '0%, 100%': { transform: 'rotate(-3deg)' },
                            '50%': { transform: 'rotate(3deg)' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- Custom Animations CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-slate-50 font-sans antialiased">
    <!-- Main App Container -->
    <div id="app" class="min-h-screen relative overflow-hidden">

        <!-- 1. Splash/Loading Screen -->
        <div class="screen active fixed inset-0 flex items-center justify-center bg-gradient-to-br from-orange-500 via-amber-400 to-yellow-300 z-50" id="screen-splash">
            <div class="text-center">
                <div class="text-9xl mb-6 animate-bounce-slow" role="img" aria-label="Fiets">üö≤</div>
                <h1 class="text-6xl font-black text-white mb-4 drop-shadow-2xl">FietsQuiz</h1>
                <p class="text-2xl text-white font-semibold mb-8">Leer de verkeersregels!</p>
                <div class="flex items-center justify-center gap-2">
                    <div class="w-3 h-3 bg-white rounded-full animate-bounce" style="animation-delay: 0s"></div>
                    <div class="w-3 h-3 bg-white rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                    <div class="w-3 h-3 bg-white rounded-full animate-bounce" style="animation-delay: 0.4s"></div>
                </div>
            </div>
        </div>

        <!-- 2. Home/Dashboard Screen -->
        <div class="screen fixed inset-0 bg-slate-50 overflow-y-auto pb-24" id="screen-home">
            <div class="max-w-4xl mx-auto px-6 py-8">
                <!-- Player Profile Section -->
                <header class="bg-white rounded-3xl shadow-lg p-8 mb-6">
                    <div class="flex items-center gap-6 mb-6">
                        <div class="w-20 h-20 rounded-full bg-gradient-to-br from-orange-500 to-amber-400 flex items-center justify-center text-4xl shadow-lg ring-4 ring-orange-200">
                            üë§
                        </div>
                        <div class="flex-1">
                            <h2 class="text-2xl font-bold text-gray-800 mb-1" id="player-title">Beginnende Fietser</h2>
                            <div class="flex items-center gap-4 text-sm">
                                <span class="flex items-center gap-1 text-amber-600 font-semibold" id="xp-display">
                                    <span class="text-xl">‚≠ê</span>
                                    <span id="current-xp">0</span> XP
                                </span>
                                <span class="flex items-center gap-1 text-orange-600 font-semibold" id="streak-display">
                                    <span class="text-xl">üî•</span>
                                    <span id="streak-count">0</span> dagen
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- XP Progress Bar -->
                    <div class="space-y-2">
                        <div class="relative h-4 bg-gray-200 rounded-full overflow-hidden">
                            <div class="absolute inset-0 bg-gradient-to-r from-orange-500 via-amber-400 to-yellow-400 rounded-full transition-all duration-500" id="xp-progress-fill" style="width: 0%"></div>
                        </div>
                        <p class="xp-progress-text text-sm text-gray-600 text-center">
                            <span id="xp-to-next">100</span> XP tot <span id="next-title" class="font-semibold">Ervaren Fietser</span>
                        </p>
                    </div>
                </header>

                <!-- Stats Section -->
                <section class="grid grid-cols-3 gap-4 mb-6">
                    <div class="bg-white rounded-2xl shadow-md p-6 hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-2xl mb-3 mx-auto">üìö</div>
                        <div class="text-3xl font-bold text-gray-800 text-center mb-1" id="lessons-completed">0</div>
                        <div class="text-sm text-gray-600 text-center">Lessen voltooid</div>
                    </div>
                    <div class="bg-white rounded-2xl shadow-md p-6 hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-amber-400 to-yellow-500 flex items-center justify-center text-2xl mb-3 mx-auto">‚≠ê</div>
                        <div class="text-3xl font-bold text-gray-800 text-center mb-1" id="stars-earned">0</div>
                        <div class="text-sm text-gray-600 text-center">Sterren verdiend</div>
                    </div>
                    <div class="bg-white rounded-2xl shadow-md p-6 hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-teal-500 to-emerald-500 flex items-center justify-center text-2xl mb-3 mx-auto">üèÖ</div>
                        <div class="text-3xl font-bold text-gray-800 text-center mb-1" id="badges-earned-count">0</div>
                        <div class="text-sm text-gray-600 text-center">Badges</div>
                    </div>
                </section>

                <!-- CTA Button -->
                <section>
                    <button class="w-full bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white text-2xl font-bold py-6 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 flex items-center justify-center gap-3" id="btn-start-learning">
                        <span class="text-3xl">üöÄ</span>
                        Start Leren
                    </button>
                </section>
            </div>

            <!-- Bottom Navigation -->
            <nav class="bottom-nav fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-40" id="bottom-nav">
                <div class="max-w-4xl mx-auto flex items-center justify-around h-20">
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-orange-600 relative" data-screen="home" aria-label="Home">
                        <div class="absolute top-0 left-0 right-0 h-1 bg-orange-500 rounded-b"></div>
                        <span class="text-2xl">üè†</span>
                        <span class="text-xs font-semibold">Home</span>
                    </button>
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-gray-500 hover:text-orange-500 transition-colors" data-screen="map" aria-label="Leren">
                        <span class="text-2xl">üó∫Ô∏è</span>
                        <span class="text-xs font-semibold">Leren</span>
                    </button>
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-gray-500 hover:text-orange-500 transition-colors" data-screen="flashcard-review" aria-label="Kaarten">
                        <span class="text-2xl">üÉè</span>
                        <span class="text-xs font-semibold">Kaarten</span>
                    </button>
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-gray-500 hover:text-orange-500 transition-colors" data-screen="badges" aria-label="Badges">
                        <span class="text-2xl">üèÖ</span>
                        <span class="text-xs font-semibold">Badges</span>
                    </button>
                </div>
            </nav>
        </div>

        <!-- 3. Level Map Screen -->
        <div class="screen fixed inset-0 bg-gradient-to-b from-sky-100 to-slate-50 overflow-y-auto pb-24" id="screen-map">
            <div class="max-w-4xl mx-auto px-6 py-8">
                <header class="text-center mb-8">
                    <h1 class="text-4xl font-black text-gray-800 mb-2">üó∫Ô∏è Jouw Leerpad</h1>
                    <p class="text-gray-600">Voltooi alle niveaus en word een fietsexpert!</p>
                </header>

                <main class="relative">
                    <div class="space-y-8" id="level-path">
                        <!-- Levels will be dynamically inserted here by JS -->
                        <!-- Example structure maintained for JS compatibility -->
                    </div>
                </main>
            </div>

            <!-- Bottom Navigation -->
            <nav class="bottom-nav fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-40" id="bottom-nav-map">
                <div class="max-w-4xl mx-auto flex items-center justify-around h-20">
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-gray-500 hover:text-orange-500 transition-colors" data-screen="home" aria-label="Home">
                        <span class="text-2xl">üè†</span>
                        <span class="text-xs font-semibold">Home</span>
                    </button>
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-orange-600 relative" data-screen="map" aria-label="Leren">
                        <div class="absolute top-0 left-0 right-0 h-1 bg-orange-500 rounded-b"></div>
                        <span class="text-2xl">üó∫Ô∏è</span>
                        <span class="text-xs font-semibold">Leren</span>
                    </button>
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-gray-500 hover:text-orange-500 transition-colors" data-screen="flashcard-review" aria-label="Kaarten">
                        <span class="text-2xl">üÉè</span>
                        <span class="text-xs font-semibold">Kaarten</span>
                    </button>
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-gray-500 hover:text-orange-500 transition-colors" data-screen="badges" aria-label="Badges">
                        <span class="text-2xl">üèÖ</span>
                        <span class="text-xs font-semibold">Badges</span>
                    </button>
                </div>
            </nav>
        </div>

        <!-- 4. Level Detail / Lesson List -->
        <div class="screen fixed inset-0 overflow-y-auto pb-8" id="screen-level">
            <header class="level-header bg-gradient-to-br from-blue-700 to-blue-900 text-white px-6 py-8 relative" id="level-header">
                <button class="absolute top-6 left-6 w-10 h-10 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center text-2xl transition-all" id="btn-back-to-map" aria-label="Terug naar overzicht">
                    ‚Üê
                </button>
                <div class="text-center pt-8">
                    <div class="text-7xl mb-4" id="level-icon-large">üö¶</div>
                    <h1 class="text-3xl font-black mb-2" id="level-name">Niveau Naam</h1>
                    <p class="text-blue-100 text-lg" id="level-description">Niveau beschrijving</p>
                </div>
            </header>

            <main class="max-w-4xl mx-auto px-6 py-8">
                <div class="space-y-4" id="lessons-list">
                    <!-- Lessons will be dynamically inserted here by JS -->
                    <!-- Example: JS will create cards with proper structure -->
                </div>
            </main>
        </div>

        <!-- 5. Lesson/Game Screen -->
        <div class="screen fixed inset-0 bg-slate-50 overflow-y-auto" id="screen-lesson">
            <!-- Top Bar -->
            <header class="bg-white border-b border-gray-200 shadow-sm sticky top-0 z-30">
                <div class="max-w-4xl mx-auto px-4 py-3 flex items-center justify-between gap-4">
                    <button class="w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-xl font-bold text-gray-600 transition-colors" id="btn-close-lesson" aria-label="Sluiten">
                        ‚úï
                    </button>
                    <div class="flex-1 flex items-center gap-3">
                        <div class="flex-1 h-3 bg-gray-200 rounded-full overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-orange-500 to-amber-400 rounded-full transition-all duration-300" id="lesson-progress-fill" style="width: 0%"></div>
                        </div>
                        <div class="text-sm font-semibold text-gray-600 whitespace-nowrap" id="question-counter">0/10</div>
                    </div>
                    <div class="flex items-center gap-1" id="hearts-container">
                        <span class="heart text-2xl" data-heart="1">‚ù§Ô∏è</span>
                        <span class="heart text-2xl" data-heart="2">‚ù§Ô∏è</span>
                        <span class="heart text-2xl" data-heart="3">‚ù§Ô∏è</span>
                    </div>
                </div>
            </header>

            <main class="max-w-4xl mx-auto px-6 py-8">
                <!-- Quiz Mode Container -->
                <div class="game-container hidden" id="game-quiz">
                    <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
                        <p class="text-xl font-semibold text-gray-800 leading-relaxed" id="quiz-question">Vraag tekst komt hier</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="quiz-options">
                        <button class="option-btn bg-white border-2 border-gray-200 rounded-xl p-5 text-left text-lg font-medium text-gray-700 hover:border-orange-400 hover:shadow-lg transition-all duration-200" data-option="0">Optie 1</button>
                        <button class="option-btn bg-white border-2 border-gray-200 rounded-xl p-5 text-left text-lg font-medium text-gray-700 hover:border-orange-400 hover:shadow-lg transition-all duration-200" data-option="1">Optie 2</button>
                        <button class="option-btn bg-white border-2 border-gray-200 rounded-xl p-5 text-left text-lg font-medium text-gray-700 hover:border-orange-400 hover:shadow-lg transition-all duration-200" data-option="2">Optie 3</button>
                        <button class="option-btn bg-white border-2 border-gray-200 rounded-xl p-5 text-left text-lg font-medium text-gray-700 hover:border-orange-400 hover:shadow-lg transition-all duration-200" data-option="3">Optie 4</button>
                    </div>
                </div>

                <!-- True/False Mode Container -->
                <div class="game-container hidden" id="game-truefalse">
                    <div class="mb-6 h-2 bg-gray-200 rounded-full overflow-hidden" id="truefalse-timer">
                        <div class="h-full bg-gradient-to-r from-orange-500 to-amber-400 rounded-full transition-all" id="truefalse-timer-fill" style="width: 100%"></div>
                    </div>
                    <div class="bg-white rounded-2xl shadow-lg p-12 mb-8 text-center">
                        <p class="text-2xl font-bold text-gray-800 leading-relaxed" id="truefalse-statement">Bewering komt hier</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <button class="bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white text-2xl font-bold py-12 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 flex items-center justify-center gap-3" id="btn-true">
                            <span class="text-4xl">‚úì</span>
                            Waar
                        </button>
                        <button class="bg-gradient-to-br from-rose-500 to-red-600 hover:from-rose-600 hover:to-red-700 text-white text-2xl font-bold py-12 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 flex items-center justify-center gap-3" id="btn-false">
                            <span class="text-4xl">‚úó</span>
                            Niet Waar
                        </button>
                    </div>
                </div>

                <!-- Memory Mode Container -->
                <div class="game-container hidden" id="game-memory">
                    <div class="flex items-center justify-between mb-6">
                        <div class="text-lg font-semibold text-gray-700" id="match-counter">Gevonden: 0/6</div>
                        <div class="text-lg font-semibold text-gray-700" id="memory-timer">Tijd: 0:00</div>
                    </div>
                    <div class="grid grid-cols-3 md:grid-cols-4 gap-4" id="memory-grid">
                        <!-- Memory cards will be dynamically inserted here -->
                    </div>
                </div>

                <!-- Matching/Drag Mode Container -->
                <div class="game-container hidden" id="game-matching">
                    <div class="mb-6 text-center">
                        <p class="text-lg font-semibold text-gray-700 mb-2">Sleep de items naar de juiste plek</p>
                        <div class="text-2xl font-bold text-orange-600" id="matching-score">Score: 0/5</div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 relative">
                        <div class="space-y-4" id="matching-left">
                            <!-- Draggable items will be inserted here -->
                        </div>
                        <div class="space-y-4" id="matching-right">
                            <!-- Drop targets will be inserted here -->
                        </div>
                    </div>
                    <svg class="absolute inset-0 pointer-events-none" id="matching-lines" style="z-index: 1;">
                        <!-- SVG lines connecting matched pairs -->
                    </svg>
                </div>

                <!-- Flashcard Mode Container -->
                <div class="game-container hidden" id="game-flashcards">
                    <div class="max-w-2xl mx-auto">
                        <div class="relative mb-8" style="perspective: 1000px;">
                            <div class="bg-white rounded-2xl shadow-2xl cursor-pointer aspect-[4/3] flex items-center justify-center p-12" id="flashcard" style="transform-style: preserve-3d; transition: transform 0.6s;">
                                <div class="flashcard-inner absolute inset-0" id="flashcard-inner" style="transform-style: preserve-3d; transition: transform 0.6s;">
                                    <div class="flashcard-front absolute inset-0 bg-gradient-to-br from-orange-50 to-amber-50 rounded-2xl border-4 border-orange-300 flex items-center justify-center p-12" style="backface-visibility: hidden;">
                                        <div class="text-center">
                                            <div class="text-8xl text-orange-200 mb-4">?</div>
                                            <p class="text-2xl font-bold text-gray-800" id="flashcard-front-content">Vraag/Term</p>
                                        </div>
                                    </div>
                                    <div class="flashcard-back absolute inset-0 bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl border-4 border-green-400 flex items-center justify-center p-12" style="backface-visibility: hidden; transform: rotateY(180deg);">
                                        <p class="text-2xl font-semibold text-gray-800 text-center" id="flashcard-back-content">Antwoord/Uitleg</p>
                                    </div>
                                </div>
                            </div>
                            <button class="mt-4 w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 rounded-xl transition-colors" id="btn-flip" aria-label="Kaart omdraaien">
                                üîÑ Draai om
                            </button>
                        </div>

                        <div class="flex items-center justify-center gap-2 mb-6" id="flashcard-dots">
                            <!-- Progress dots will be inserted here -->
                        </div>

                        <div class="flex items-center justify-between gap-4 mb-6">
                            <button class="flex-1 bg-white border-2 border-gray-300 hover:border-gray-400 text-gray-700 font-semibold py-3 rounded-xl transition-all" id="btn-flashcard-prev" aria-label="Vorige kaart">
                                ‚Üê Vorige
                            </button>
                            <button class="flex-1 bg-white border-2 border-gray-300 hover:border-gray-400 text-gray-700 font-semibold py-3 rounded-xl transition-all" id="btn-flashcard-next" aria-label="Volgende kaart">
                                Volgende ‚Üí
                            </button>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button class="bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white text-lg font-bold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all" id="btn-flashcard-know">
                                ‚úì Ik wist het!
                            </button>
                            <button class="bg-gradient-to-br from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white text-lg font-bold py-4 rounded-xl shadow-lg hover:shadow-xl transition-all" id="btn-flashcard-practice">
                                ‚Üª Nog oefenen
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Situation Mode Container -->
                <div class="game-container hidden" id="game-situation">
                    <div class="bg-white rounded-2xl shadow-lg p-8 mb-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                            <span class="text-2xl">üö¶</span>
                            Situatie
                        </h3>
                        <p class="text-lg text-gray-700 leading-relaxed" id="situation-scenario-text">
                            Scenario beschrijving komt hier
                        </p>
                    </div>
                    <div class="bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl p-8 mb-6 min-h-[200px] flex items-center justify-center text-6xl" id="situation-visual">
                        üö≤üöóüö¶
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="situation-options">
                        <button class="option-btn bg-white border-2 border-gray-200 rounded-xl p-5 text-left text-lg font-medium text-gray-700 hover:border-orange-400 hover:shadow-lg transition-all duration-200" data-option="0">Optie 1</button>
                        <button class="option-btn bg-white border-2 border-gray-200 rounded-xl p-5 text-left text-lg font-medium text-gray-700 hover:border-orange-400 hover:shadow-lg transition-all duration-200" data-option="1">Optie 2</button>
                        <button class="option-btn bg-white border-2 border-gray-200 rounded-xl p-5 text-left text-lg font-medium text-gray-700 hover:border-orange-400 hover:shadow-lg transition-all duration-200" data-option="2">Optie 3</button>
                        <button class="option-btn bg-white border-2 border-gray-200 rounded-xl p-5 text-left text-lg font-medium text-gray-700 hover:border-orange-400 hover:shadow-lg transition-all duration-200" data-option="3">Optie 4</button>
                    </div>
                </div>
            </main>
        </div>

        <!-- 6. Lesson Complete Screen -->
        <div class="screen fixed inset-0 bg-gradient-to-br from-amber-50 to-orange-50 flex items-center justify-center overflow-y-auto" id="screen-results">
            <div class="max-w-2xl mx-auto px-6 py-8 text-center">
                <!-- Star Animation -->
                <div class="flex items-center justify-center gap-4 mb-8" id="star-animation">
                    <div class="star text-8xl animate-bounce" style="animation-delay: 0s">‚≠ê</div>
                    <div class="star text-8xl animate-bounce" style="animation-delay: 0.1s">‚≠ê</div>
                    <div class="star text-8xl animate-bounce" style="animation-delay: 0.2s">‚≠ê</div>
                </div>

                <h1 class="results-title text-5xl font-black text-gray-800 mb-8">Les Voltooid!</h1>

                <!-- Results Stats -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div class="bg-white rounded-2xl shadow-lg p-8">
                        <div class="text-gray-600 font-semibold mb-2">Score</div>
                        <div class="text-3xl font-bold text-gray-800" id="result-score">8 van 10 goed!</div>
                    </div>
                    <div class="bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl shadow-lg p-8 text-white">
                        <div class="text-green-100 font-semibold mb-2">XP Verdiend</div>
                        <div class="text-3xl font-bold" id="result-xp">+50 XP</div>
                    </div>
                </div>

                <!-- New Badges -->
                <div class="mb-8" id="badges-earned">
                    <!-- New badges will be shown here -->
                </div>

                <!-- Action Buttons -->
                <div class="space-y-4">
                    <button class="w-full bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white text-xl font-bold py-6 rounded-2xl shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300" id="btn-next-lesson">
                        Volgende Les ‚Üí
                    </button>
                    <div class="flex gap-4">
                        <button class="flex-1 bg-white border-2 border-gray-300 hover:border-gray-400 text-gray-700 font-semibold py-4 rounded-xl transition-all" id="btn-retry-lesson">
                            ‚Üª Opnieuw
                        </button>
                        <button class="flex-1 bg-white border-2 border-gray-300 hover:border-gray-400 text-gray-700 font-semibold py-4 rounded-xl transition-all" id="btn-back-to-overview">
                            Terug naar overzicht
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 7. Badges Screen -->
        <div class="screen fixed inset-0 bg-slate-50 overflow-y-auto pb-24" id="screen-badges">
            <div class="max-w-6xl mx-auto px-6 py-8">
                <header class="text-center mb-8">
                    <h1 class="text-4xl font-black text-gray-800 mb-2">üèÖ Jouw Badges</h1>
                    <p class="text-lg text-gray-600" id="badges-count">0 van 12 badges verdiend</p>
                </header>

                <main>
                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6" id="badges-grid">
                        <!-- Badges will be dynamically inserted here -->
                    </div>
                </main>
            </div>

            <!-- Bottom Navigation -->
            <nav class="bottom-nav fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-40" id="bottom-nav-badges">
                <div class="max-w-4xl mx-auto flex items-center justify-around h-20">
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-gray-500 hover:text-orange-500 transition-colors" data-screen="home" aria-label="Home">
                        <span class="text-2xl">üè†</span>
                        <span class="text-xs font-semibold">Home</span>
                    </button>
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-gray-500 hover:text-orange-500 transition-colors" data-screen="map" aria-label="Leren">
                        <span class="text-2xl">üó∫Ô∏è</span>
                        <span class="text-xs font-semibold">Leren</span>
                    </button>
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-gray-500 hover:text-orange-500 transition-colors" data-screen="flashcard-review" aria-label="Kaarten">
                        <span class="text-2xl">üÉè</span>
                        <span class="text-xs font-semibold">Kaarten</span>
                    </button>
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-orange-600 relative" data-screen="badges" aria-label="Badges">
                        <div class="absolute top-0 left-0 right-0 h-1 bg-orange-500 rounded-b"></div>
                        <span class="text-2xl">üèÖ</span>
                        <span class="text-xs font-semibold">Badges</span>
                    </button>
                </div>
            </nav>
        </div>

        <!-- 8. Flashcard Review Screen -->
        <div class="screen fixed inset-0 bg-slate-50 overflow-y-auto pb-24" id="screen-flashcard-review">
            <div class="max-w-6xl mx-auto px-6 py-8">
                <header class="text-center mb-8">
                    <h1 class="text-4xl font-black text-gray-800 mb-2">üÉè Oefen met Kaarten</h1>
                </header>

                <main>
                    <!-- Category Selector -->
                    <section class="category-selector mb-8">
                        <h2 class="text-2xl font-bold text-gray-800 mb-4">Kies een categorie</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="category-grid">
                            <!-- Categories will be dynamically inserted here -->
                        </div>
                    </section>

                    <!-- Review Flashcard Container -->
                    <section class="review-flashcard-container hidden max-w-2xl mx-auto" id="review-flashcard-container">
                        <div class="relative mb-8" style="perspective: 1000px;">
                            <div class="bg-white rounded-2xl shadow-2xl cursor-pointer aspect-[4/3] flex items-center justify-center p-12" id="review-flashcard" style="transform-style: preserve-3d; transition: transform 0.6s;">
                                <div class="flashcard-inner absolute inset-0" id="review-flashcard-inner" style="transform-style: preserve-3d; transition: transform 0.6s;">
                                    <div class="flashcard-front absolute inset-0 bg-gradient-to-br from-orange-50 to-amber-50 rounded-2xl border-4 border-orange-300 flex items-center justify-center p-12" style="backface-visibility: hidden;">
                                        <div class="text-center">
                                            <div class="text-8xl text-orange-200 mb-4">?</div>
                                            <p class="text-2xl font-bold text-gray-800" id="review-flashcard-front-content">Vraag/Term</p>
                                        </div>
                                    </div>
                                    <div class="flashcard-back absolute inset-0 bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl border-4 border-green-400 flex items-center justify-center p-12" style="backface-visibility: hidden; transform: rotateY(180deg);">
                                        <p class="text-2xl font-semibold text-gray-800 text-center" id="review-flashcard-back-content">Antwoord/Uitleg</p>
                                    </div>
                                </div>
                            </div>
                            <button class="mt-4 w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 rounded-xl transition-colors" id="btn-review-flip" aria-label="Kaart omdraaien">
                                üîÑ Draai om
                            </button>
                        </div>

                        <div class="text-center text-lg font-semibold text-gray-600 mb-6" id="review-progress">
                            <span id="review-current">1</span> / <span id="review-total">10</span>
                        </div>

                        <div class="flex items-center justify-between gap-4 mb-6">
                            <button class="flex-1 bg-white border-2 border-gray-300 hover:border-gray-400 text-gray-700 font-semibold py-4 rounded-xl transition-all" id="btn-review-prev" aria-label="Vorige kaart">
                                ‚Üê Vorige
                            </button>
                            <button class="flex-1 bg-white border-2 border-gray-300 hover:border-gray-400 text-gray-700 font-semibold py-4 rounded-xl transition-all" id="btn-review-next" aria-label="Volgende kaart">
                                Volgende ‚Üí
                            </button>
                        </div>

                        <button class="w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-3 rounded-xl transition-colors" id="btn-back-to-categories">
                            ‚Üê Terug naar categorie√´n
                        </button>
                    </section>
                </main>
            </div>

            <!-- Bottom Navigation -->
            <nav class="bottom-nav fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-40" id="bottom-nav-flashcards">
                <div class="max-w-4xl mx-auto flex items-center justify-around h-20">
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-gray-500 hover:text-orange-500 transition-colors" data-screen="home" aria-label="Home">
                        <span class="text-2xl">üè†</span>
                        <span class="text-xs font-semibold">Home</span>
                    </button>
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-gray-500 hover:text-orange-500 transition-colors" data-screen="map" aria-label="Leren">
                        <span class="text-2xl">üó∫Ô∏è</span>
                        <span class="text-xs font-semibold">Leren</span>
                    </button>
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-orange-600 relative" data-screen="flashcard-review" aria-label="Kaarten">
                        <div class="absolute top-0 left-0 right-0 h-1 bg-orange-500 rounded-b"></div>
                        <span class="text-2xl">üÉè</span>
                        <span class="text-xs font-semibold">Kaarten</span>
                    </button>
                    <button class="nav-item flex flex-col items-center justify-center gap-1 px-6 py-2 text-gray-500 hover:text-orange-500 transition-colors" data-screen="badges" aria-label="Badges">
                        <span class="text-2xl">üèÖ</span>
                        <span class="text-xs font-semibold">Badges</span>
                    </button>
                </div>
            </nav>
        </div>

        <!-- Feedback Overlay (for correct/incorrect answers) -->
        <div class="feedback-overlay fixed inset-x-0 bottom-0 transform translate-y-full transition-transform duration-300 z-50" id="feedback-overlay">
            <div class="bg-white rounded-t-3xl shadow-2xl border-t-4 border-green-500 max-w-2xl mx-auto p-8" id="feedback-content">
                <div class="text-center">
                    <div class="text-6xl mb-4" id="feedback-icon">‚úì</div>
                    <div class="text-2xl font-bold text-gray-800 mb-2" id="feedback-text">Goed gedaan!</div>
                    <div class="text-lg text-gray-600 mb-6" id="feedback-explanation"></div>
                    <button class="bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white text-lg font-bold py-4 px-12 rounded-xl shadow-lg hover:shadow-xl transition-all" id="feedback-continue">Volgende</button>
                </div>
            </div>
        </div>

        <!-- Modal/Overlay -->
        <div class="modal-overlay fixed inset-0 bg-black/50 hidden items-center justify-center z-50 p-6" id="modal-overlay">
            <div class="bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto relative" id="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
                <button class="absolute top-4 right-4 w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-2xl font-bold text-gray-600 transition-colors z-10" id="modal-close" aria-label="Sluiten">&times;</button>
                <div class="p-8" id="modal-content"></div>
            </div>
        </div>

        <!-- Confetti Container -->
        <div class="confetti-container fixed inset-0 pointer-events-none z-[60]" id="confetti-container" aria-hidden="true"></div>

    </div>

    <!-- Hidden SVG definitions for traffic signs (optional) -->
    <svg style="display: none;" aria-hidden="true">
        <defs>
            <!-- Traffic sign symbols can be defined here and referenced via <use> tags -->
            <symbol id="stop-sign" viewBox="0 0 100 100">
                <polygon points="50,5 85,20 95,50 85,80 50,95 15,80 5,50 15,20" fill="#E30613" stroke="#fff" stroke-width="3"/>
                <text x="50" y="60" text-anchor="middle" fill="#fff" font-size="24" font-weight="bold">STOP</text>
            </symbol>
        </defs>
    </svg>

    <!-- No JavaScript Warning -->
    <noscript>
        <div class="fixed inset-0 bg-white flex items-center justify-center flex-col p-8 text-center z-[10000]">
            <h1 class="text-5xl mb-4">üö≤ FietsQuiz</h1>
            <p class="text-xl mb-4">JavaScript is vereist om FietsQuiz te gebruiken.</p>
            <p class="text-gray-600">Schakel JavaScript in je browser in om te kunnen spelen.</p>
        </div>
    </noscript>

    <!-- JavaScript Files -->
    <script src="js/data.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
